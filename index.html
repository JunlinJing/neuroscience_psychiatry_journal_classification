<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2025年中科院神经科学/精神病学期刊分区表 (尝试加载JSON)</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/simple-datatables@latest/dist/style.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.0.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.10.5/dist/cdn.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/simple-datatables@latest"></script>
    <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
    <style>
        /* Styles (unchanged) */
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;700&display=swap');
        body { font-family: 'Noto Sans SC', sans-serif; background-color: #f9fafb; }
        .zone-tabs .active-tab { border-bottom: 3px solid #3b82f6; color: #1e40af; font-weight: 600; }
        .zone-1 { background-color: #dbeafe; } .zone-1-header { background-color: #3b82f6; }
        .zone-2 { background-color: #e0f2fe; } .zone-2-header { background-color: #0ea5e9; }
        .zone-3 { background-color: #f0fdfa; } .zone-3-header { background-color: #14b8a6; }
        .zone-4 { background-color: #fef3c7; } .zone-4-header { background-color: #f59e0b; }
        table.dataTable thead th { position: sticky; top: 0; background-color: white; z-index: 10; }
        .dataTable-wrapper .dataTable-top { padding: 1rem 0; }
        @media print { .no-print { display: none !important; } .print-break-inside-avoid { break-inside: avoid; } html, body { width: 100%; height: auto; } .zone-tab-content { display: block !important; opacity: 1 !important; height: auto !important; } }
        .loading-indicator { display: flex; justify-content: center; align-items: center; height: 100px; font-size: 1.2em; color: #666; }
        .loading-indicator i { margin-right: 10px; animation: spin 1s linear infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        .error-message { text-align: center; color: #dc2626; padding: 1rem; background-color: #fee2e2; border: 1px solid #fecaca; border-radius: 0.5rem; margin-bottom: 1rem; }
    </style>
</head>
<body>
    <div class="container mx-auto px-4 py-8" x-data="journalApp()">
        <header class="mb-8 text-center">
            <h1 class="text-3xl font-bold text-gray-800 mb-2">2025年中科院神经科学/精神病学期刊分区表 (尝试加载JSON)</h1>
            <p class="text-gray-600 max-w-3xl mx-auto">基于2025年中国科学院文献情报中心发布的最新期刊分区数据，包含神经科学、精神病学及相关领域的期刊分类信息。(尝试从 'journal_data.json' 加载)</p>
        </header>

        <div class="bg-white rounded-lg shadow-md p-4 mb-8 no-print">
            <div class="flex flex-col md:flex-row justify-between items-center mb-4">
                <div class="w-full md:w-2/5 mb-4 md:mb-0"> <div class="relative"> <input type="text" x-model="searchTerm" @input.debounce.300ms="filterJournals()" placeholder="搜索期刊名称、ISSN或缩写..." class="w-full pl-10 pr-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" :disabled="isLoading" > <div class="absolute left-3 top-2.5 text-gray-400"> <i class="fas fa-search"></i> </div> </div> </div>
                <div class="w-full md:w-3/5 flex flex-wrap justify-end gap-2">
                    <div class="flex items-center mr-4"> <label class="mr-2 text-gray-700 text-sm">学科:</label> <select x-model="disciplineFilter" @change="filterJournals()" class="border rounded px-2 py-1 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500" :disabled="isLoading" > <option value="all">全部</option> <option value="neuroscience">神经科学</option> <option value="psychiatry">精神病学</option> <option value="neurology">神经病学</option> <option value="related">相关领域</option> </select> </div>
                    <div class="flex items-center mr-4"> <label class="mr-2 text-gray-700 text-sm">收录:</label> <select x-model="indexFilter" @change="filterJournals()" class="border rounded px-2 py-1 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500" :disabled="isLoading" > <option value="all">全部</option> <option value="SCI">SCI</option> <option value="SCIE">SCIE</option> <option value="SSCI">SSCI</option> <option value="ESCI">ESCI</option> </select> </div>
                    <button @click="exportToXLSX()" class="px-3 py-1.5 bg-green-600 text-white rounded-md hover:bg-green-700 text-sm flex items-center" :disabled="isLoading || totalFilteredJournals === 0" :class="{'opacity-50 cursor-not-allowed': isLoading || totalFilteredJournals === 0}" > <i class="fas fa-file-excel mr-1"></i> 导出XLSX </button>
                </div>
            </div>
             <div class="flex flex-wrap items-center text-sm text-gray-600 mt-2">
                <span class="mr-6"><i class="fas fa-filter mr-1"></i> 当前筛选:</span>
                <span class="inline-flex items-center bg-blue-100 text-blue-800 rounded-full px-3 py-0.5 mr-2 mb-1" x-show="disciplineFilter !== 'all'"> 学科: <span x-text="getDisciplineName(disciplineFilter)" class="ml-1 font-medium"></span> <button @click="disciplineFilter = 'all'; filterJournals()" class="ml-1 text-blue-600 hover:text-blue-800" :disabled="isLoading"> <i class="fas fa-times-circle"></i> </button> </span>
                <span class="inline-flex items-center bg-blue-100 text-blue-800 rounded-full px-3 py-0.5 mr-2 mb-1" x-show="indexFilter !== 'all'"> 收录: <span x-text="indexFilter" class="ml-1 font-medium"></span> <button @click="indexFilter = 'all'; filterJournals()" class="ml-1 text-blue-600 hover:text-blue-800" :disabled="isLoading"> <i class="fas fa-times-circle"></i> </button> </span>
                <span class="inline-flex items-center bg-blue-100 text-blue-800 rounded-full px-3 py-0.5 mr-2 mb-1" x-show="searchTerm !== ''"> 关键词: "<span x-text="searchTerm" class="ml-1 font-medium"></span>" <button @click="searchTerm = ''; filterJournals()" class="ml-1 text-blue-600 hover:text-blue-800" :disabled="isLoading"> <i class="fas fa-times-circle"></i> </button> </span>
                 <span class="text-gray-500 ml-auto" x-show="!isLoading && !loadError" x-text="`总计: ${totalFilteredJournals} 本期刊`"></span>
                 <span class="text-gray-500 ml-auto" x-show="isLoading">正在加载数据...</span>
                 <span class="text-red-600 ml-auto" x-show="loadError" x-text="loadError"></span> </div>
        </div>

        <div x-show="isLoading" class="loading-indicator">
            <i class="fas fa-spinner"></i> 正在加载期刊数据...
        </div>

         <div x-show="loadError && !isLoading" class="error-message">
            <i class="fas fa-exclamation-triangle mr-2"></i>
            <span x-text="loadError"></span>
            <span> (已加载内置示例数据作为后备)</span>
        </div>


        <div x-show="!isLoading">
            <div class="zone-tabs flex border-b mb-6 no-print">
                <template x-for="(tab, index) in tabs" :key="index">
                    <button :class="{'active-tab': activeTab === tab.id}" class="px-6 py-2 text-gray-600 hover:text-gray-900 focus:outline-none" @click="activeTab = tab.id" x-text="tab.name"></button>
                </template>
            </div>
            <template x-for="(tab, index) in tabs" :key="index">
                <div x-show="activeTab === tab.id" x-transition :class="{'zone-tab-content': true, 'print-break-inside-avoid': true}" :id="'zone-' + tab.id">
                    <div :class="`zone-${tab.id}-header text-white rounded-t-lg py-3 px-4 flex justify-between items-center`"> <h2 class="text-xl font-semibold" x-text="tab.name + ' 期刊列表'"></h2> <span class="text-white bg-white bg-opacity-20 rounded-full px-3 py-1 text-sm"> 共 <span x-text="getZoneJournalCount(tab.id)"></span> 本期刊 </span> </div>
                    <div :class="`zone-${tab.id} rounded-b-lg p-1 md:p-4 overflow-x-auto`">
                        <table :id="`zone-${tab.id}-table`" class="w-full stripe hover simple-datatable">
                            <thead> <tr> <th class="text-left">期刊全称（英文/中文）</th> <th class="text-left">期刊缩写</th> <th class="text-center">ISSN</th> <th class="text-center">影响因子</th> <th class="text-center">h指数</th> <th class="text-center">CiteScore</th> <th class="text-center">JCR分区</th> <th class="text-center">中科院大类</th> <th class="text-center">中科院小类</th> <th class="text-center">收录情况</th> <th class="text-center">OA</th> </tr> </thead>
                            <tbody>
                                <template x-for="(journal, jIndex) in filteredData[tab.id]" :key="journal.issn"> <tr> <td> <div class="font-medium" x-text="journal.nameEn"></div> <div class="text-sm text-gray-600" x-text="journal.nameCn || '-'"></div> </td> <td x-text="journal.abbr || '-'"></td> <td class="text-center" x-text="journal.issn"></td> <td class="text-center font-medium" x-text="journal.impactFactor !== null ? journal.impactFactor : '-'"></td> <td class="text-center" x-text="journal.hIndex !== null ? journal.hIndex : '-'"></td> <td class="text-center" x-text="journal.citeScore !== null ? journal.citeScore : '-'"></td> <td class="text-center"> <span :class="{ 'px-2 py-0.5 rounded text-xs font-medium': true, 'bg-blue-100 text-blue-800': journal.jcrQuartile === 'Q1', 'bg-green-100 text-green-800': journal.jcrQuartile === 'Q2', 'bg-yellow-100 text-yellow-800': journal.jcrQuartile === 'Q3', 'bg-red-100 text-red-800': journal.jcrQuartile === 'Q4', 'bg-gray-100 text-gray-800': !journal.jcrQuartile }" x-text="journal.jcrQuartile || '-'" ></span> </td> <td class="text-center" x-text="journal.casCategory || '-'"></td> <td class="text-center" x-text="journal.casSubcategory || '-'"></td> <td class="text-center" x-text="journal.indexing || '-'"></td> <td class="text-center"> <i :class="{ 'fas': true, 'fa-check text-green-600': journal.isOA === 'Yes', 'fa-times text-red-600': journal.isOA === 'No', 'fa-question text-gray-500': journal.isOA !== 'Yes' && journal.isOA !== 'No' }" ></i> </td> </tr> </template>
                                <template x-if="filteredData[tab.id] && filteredData[tab.id].length === 0"> <tr> <td colspan="11" class="text-center text-gray-500 py-4">没有找到符合条件的期刊。</td> </tr> </template>
                            </tbody>
                        </table>
                    </div>
                </div>
            </template>
        </div> <div class="mt-12 bg-white p-6 rounded-lg shadow-md">
             <h3 class="text-xl font-semibold text-gray-800 mb-4">数据来源</h3>
             <p class="text-gray-600 mb-4">本期刊分区表根据以下来源的数据进行整理和汇总：</p>
             <div class="space-y-2"> <div class="flex items-start"> <div class="flex-shrink-0 h-5 w-5 text-blue-600"> <i class="fas fa-link"></i> </div> <div class="ml-3"> <p class="text-gray-700"> <a href="https://www.fenqubiao.com/" class="text-blue-600 hover:underline" target="_blank">中国科学院文献情报中心期刊分区表</a> - 《期刊分区表》是中国科学院文献情报中心的科学研究成果，自2004年发布，延续至今 </p> </div> </div> <div class="flex items-start"> <div class="flex-shrink-0 h-5 w-5 text-blue-600"> <i class="fas fa-link"></i> </div> <div class="ml-3"> <p class="text-gray-700"> <a href="https://www.letpub.com.cn/" class="text-blue-600 hover:underline" target="_blank">LetPub学术资源</a> - 提供最新SCI期刊影响因子查询及投稿分析系统 </p> </div> </div> <div class="flex items-start"> <div class="flex-shrink-0 h-5 w-5 text-blue-600"> <i class="fas fa-link"></i> </div> <div class="ml-3"> <p class="text-gray-700"> <a href="https://jcr.clarivate.com/" class="text-blue-600 hover:underline" target="_blank">Journal Citation Reports (JCR)</a> - 由科睿唯安（Clarivate Analytics）提供的期刊引证报告 </p> </div> </div> </div>
             <div class="mt-6 text-sm text-gray-500"> <p>数据更新时间：2025年3月20日 (示例数据)</p> <p>注意：本表仅供学术参考和功能演示，具体期刊分区情况请以官方发布为准。</p> </div>
        </div>

        <footer class="mt-8 pt-8 border-t border-gray-200 text-center text-gray-600 text-sm">
            <p>© 2025 期刊分区查询系统 | 基于中国科学院期刊分区数据 (示例)</p>
        </footer>
    </div>

    <script>
        // Alpine.js component definition
        function journalApp() {
            return {
                isLoading: true, // Flag to indicate data loading state
                loadError: null, // Store loading error message
                activeTab: '1', // Default active tab is Zone 1
                searchTerm: '', // Search input model
                disciplineFilter: 'all', // Discipline filter model
                indexFilter: 'all', // Indexing filter model
                tabs: [ // Tab definitions
                    { id: '1', name: '一区' }, { id: '2', name: '二区' },
                    { id: '3', name: '三区' }, { id: '4', name: '四区' }
                ],
                dataTables: {}, // Object to hold DataTable instances
                journalData: {}, // Initialize as empty, data will be loaded in init()
                filteredData: { '1': [], '2': [], '3': [], '4': [] },
                totalFilteredJournals: 0, // Total count across all zones

                // Initialization function, called when the component loads
                init() {
                    this.isLoading = true;
                    this.loadError = null; // Reset error on init
                    console.log("Initializing app and attempting to load data from JSON...");

                    // --- Data Loading ---
                    fetch('./journal_data.json') // Attempt to fetch the local JSON file
                        .then(response => {
                            if (!response.ok) {
                                throw new Error(`无法加载 journal_data.json: ${response.status} ${response.statusText}`);
                            }
                            return response.json(); // Parse JSON data from the response body
                        })
                        .then(data => {
                            // If fetch and JSON parsing are successful
                            this.journalData = data; // Assign loaded data
                            console.log("Data loaded successfully from journal_data.json.");
                            this.filterJournals(); // Apply initial filters
                        })
                        .catch(error => {
                            // If fetch fails
                            console.error("Error loading journal_data.json:", error);
                            this.loadError = `加载外部JSON文件失败 (${error.message})。`;
                            // --- Fallback to embedded sample data ---
                            console.log("Loading fallback sample data.");
                            this.journalData = this.getFallbackData(); // Load hardcoded data
                            this.filterJournals(); // Apply filters to fallback data
                        })
                        .finally(() => {
                            // This block runs regardless of success or failure
                            this.isLoading = false; // Hide loading indicator
                            console.log("Loading process finished.");
                            // *** REMOVED DataTable initialization from here ***
                            // It will be handled by filterJournals() after data is ready
                        });
                },

                 // Function to provide fallback data if JSON loading fails
                getFallbackData() {
                    // Returns the same sample data structure used previously
                    // (Keep the large data object here as before)
                    return {
                      "1": [ { nameEn: "Nature Neuroscience", nameCn: "自然神经科学", abbr: "NAT NEUROSCI", issn: "1097-6256", impactFactor: 24.884, hIndex: 401, citeScore: 26.9, jcrQuartile: "Q1", casCategory: "医学", casSubcategory: "神经科学", indexing: "SCI", isOA: "No", discipline: "neuroscience" }, /* ... more zone 1 data ... */ { nameEn: "Annual Review of Neuroscience", nameCn: "神经科学年度评论", abbr: "ANNU REV NEUROSCI", issn: "0147-006X", impactFactor: 16.92, hIndex: 220, citeScore: 18.5, jcrQuartile: "Q1", casCategory: "医学", casSubcategory: "神经科学", indexing: "SCI", isOA: "No", discipline: "neuroscience" } ],
                      "2": [ { nameEn: "Journal of Neuroscience", nameCn: "神经科学杂志", abbr: "J NEUROSCI", issn: "0270-6474", impactFactor: 6.673, hIndex: 409, citeScore: 9.1, jcrQuartile: "Q1", casCategory: "医学", casSubcategory: "神经科学", indexing: "SCI", isOA: "No", discipline: "neuroscience" }, /* ... more zone 2 data ... */ { nameEn: "Biological Psychiatry: Cognitive Neuroscience and Neuroimaging", nameCn: "生物精神病学：认知神经科学与神经影像", abbr: "BIOL PSYCHIAT CN...", issn: "2451-9022", impactFactor: 6.161, hIndex: 55, citeScore: 8.5, jcrQuartile: "Q1", casCategory: "医学", casSubcategory: "精神病学", indexing: "SCIE", isOA: "No", discipline: "psychiatry" } ],
                      "3": [ { nameEn: "ACS Chemical Neuroscience", nameCn: "ACS化学神经科学", abbr: "ACS CHEM NEUROSCI", issn: "1948-7193", impactFactor: 4.418, hIndex: 87, citeScore: 6.8, jcrQuartile: "Q2", casCategory: "医学", casSubcategory: "神经科学", indexing: "SCIE", isOA: "No", discipline: "neuroscience" }, /* ... more zone 3 data ... */ { nameEn: "Social Cognitive and Affective Neuroscience", nameCn: "社会认知与情感神经科学", abbr: "SOC COGN AFFECT NEUR", issn: "1749-5016", impactFactor: 3.615, hIndex: 97, citeScore: 5.8, jcrQuartile: "Q2", casCategory: "心理学", casSubcategory: "心理学：实验", indexing: "SSCI", isOA: "Yes", discipline: "related" } ],
                      "4": [ { nameEn: "Neuroscience Letters", nameCn: "神经科学快报", abbr: "NEUROSCI LETT", issn: "0304-3940", impactFactor: 3.046, hIndex: 155, citeScore: 3.5, jcrQuartile: "Q3", casCategory: "医学", casSubcategory: "神经科学", indexing: "SCIE", isOA: "No", discipline: "neuroscience" }, /* ... more zone 4 data ... */ { nameEn: "Psychiatry and Clinical Neurosciences", nameCn: "精神病学与临床神经科学", abbr: "PSYCHIAT CLIN NEUROS", issn: "1323-1316", impactFactor: 3.558, hIndex: 87, citeScore: 4.9, jcrQuartile: "Q2", casCategory: "医学", casSubcategory: "精神病学", indexing: "SCI", isOA: "No", discipline: "psychiatry" } ]
                    };
                },

                // Initialize or re-initialize DataTables for all visible tabs
                initializeAllDataTables() {
                    // This function might still be useful if called manually elsewhere, but not needed in init's finally block
                    this.tabs.forEach(tab => { this.initDataTable(tab.id); });
                },

                // Initialize or re-initialize a DataTable for a specific zone
                initDataTable(zoneId) {
                    const tableElement = document.querySelector(`#zone-${zoneId}-table.simple-datatable`);
                    if (!tableElement || this.isLoading) { return; } // Don't init if element not ready or still loading

                    if (this.dataTables[zoneId] && !this.dataTables[zoneId].destroyed) {
                        try { this.dataTables[zoneId].destroy(); } catch (e) { console.error(`Error destroying DataTable for zone ${zoneId}:`, e); }
                    }

                    // Ensure data is present before initializing
                    // Use optional chaining ?. just in case filteredData[zoneId] is temporarily undefined
                    if (this.filteredData?.[zoneId]?.length > 0) {
                        try {
                            this.dataTables[zoneId] = new simpleDatatables.DataTable(tableElement, {
                                searchable: false, fixedHeight: false, perPage: 10, perPageSelect: [10, 20, 50, 100, -1],
                                labels: { placeholder: "搜索...", perPage: "每页显示 {select} 条", noRows: "未找到匹配的期刊", info: "显示第 {start} 至 {end} 条，共 {rows} 条", noResults: "未找到匹配 \"{search}\" 的结果", },
                                layout: { top: "{select}", bottom: "{info}{pager}" }
                            });
                        } catch (e) { console.error(`Error initializing DataTable for zone ${zoneId}:`, e); }
                    } else {
                        // If no data, ensure no active DataTable instance exists for this zone
                         this.dataTables[zoneId] = { destroyed: true };
                    }
                },

                // Filter journal data based on search term and dropdown selections
                filterJournals() {
                    // Don't filter if data hasn't loaded yet or is empty
                    if (this.isLoading || !this.journalData || Object.keys(this.journalData).length === 0) {
                        // If loading is finished but data is empty (e.g., fetch failed and no fallback)
                        if (!this.isLoading) {
                             this.totalFilteredJournals = 0;
                             this.tabs.forEach(tab => {
                                 this.filteredData[tab.id] = []; // Ensure filtered data is empty
                                 this.initDataTable(tab.id); // Try to update/clear table
                             });
                        }
                        return;
                    }

                    const term = this.searchTerm.toLowerCase().trim();
                    let totalCount = 0;
                    this.tabs.forEach(tab => {
                        const originalData = this.journalData[tab.id] || [];
                        if (!this.filteredData[tab.id]) { this.filteredData[tab.id] = []; } // Initialize if needed

                        this.filteredData[tab.id] = originalData.filter(journal => {
                            if (!journal) return false;
                            const disciplineMatch = this.disciplineFilter === 'all' || journal.discipline === this.disciplineFilter;
                            const indexMatch = this.indexFilter === 'all' || (journal.indexing && journal.indexing.includes(this.indexFilter));
                            const termMatch = term === '' || ( (journal.nameEn && journal.nameEn.toLowerCase().includes(term)) || (journal.nameCn && journal.nameCn.toLowerCase().includes(term)) || (journal.abbr && journal.abbr.toLowerCase().includes(term)) || (journal.issn && journal.issn.toLowerCase().includes(term)) );
                            return disciplineMatch && indexMatch && termMatch;
                        });
                        totalCount += this.filteredData[tab.id].length;
                    });
                    this.totalFilteredJournals = totalCount;

                    // Re-initialize DataTables *after* Alpine has updated the DOM.
                    this.$nextTick(() => {
                       // console.log("DOM updated after filtering, re-initializing DataTables.");
                       this.tabs.forEach(tab => { this.initDataTable(tab.id); });
                    });
                },

                // Export filtered data to an Excel (XLSX) file (unchanged)
                exportToXLSX() {
                     if (this.isLoading || this.totalFilteredJournals === 0) { alert("没有可导出的数据或数据仍在加载中。"); return; }
                    const wb = XLSX.utils.book_new();
                    let dataToExport = [];
                     const header = ['分区', '期刊全称（英文）', '期刊全称（中文）', '期刊缩写', 'ISSN', '影响因子', 'h指数', 'CiteScore', 'JCR分区', '中科院大类', '中科院小类', '收录情况', '是否OA', '学科'];
                    this.tabs.forEach(tab => {
                        if (this.filteredData[tab.id]) {
                            this.filteredData[tab.id].forEach(journal => {
                                if (!journal) return;
                                dataToExport.push([ tab.name, journal.nameEn || '-', journal.nameCn || '-', journal.abbr || '-', journal.issn || '-', journal.impactFactor !== null ? journal.impactFactor : '-', journal.hIndex !== null ? journal.hIndex : '-', journal.citeScore !== null ? journal.citeScore : '-', journal.jcrQuartile || '-', journal.casCategory || '-', journal.casSubcategory || '-', journal.indexing || '-', journal.isOA || '-', this.getDisciplineName(journal.discipline) || '-' ]);
                            });
                        }
                    });
                    const wsData = [header, ...dataToExport];
                    const ws = XLSX.utils.aoa_to_sheet(wsData);
                    const colWidths = header.map((h, i) => ({ wch: Math.max( (h || '').length, ...wsData.slice(1).map(row => (row[i] ? String(row[i]).length : 0)) ) + 2 }));
                    ws['!cols'] = colWidths;
                    XLSX.utils.book_append_sheet(wb, ws, '期刊分区数据');
                    XLSX.writeFile(wb, '2025年神经科学精神病学期刊分区表_筛选结果.xlsx');
                },

                // Get the count of journals in a specific zone (unchanged)
                getZoneJournalCount(zoneId) {
                    return this.filteredData && this.filteredData[zoneId] ? this.filteredData[zoneId].length : 0;
                },

                // Get the display name for a discipline code (unchanged)
                getDisciplineName(disciplineCode) {
                    const disciplines = { 'neuroscience': '神经科学', 'psychiatry': '精神病学', 'neurology': '神经病学', 'related': '相关领域', 'all': '全部' };
                    return disciplines[disciplineCode] || disciplineCode;
                }
            };
        }
    </script>
</body>
</html>
```

**主要改动：**

* 在 `init()` 函数的 `.finally` 部分，我**移除**了 `this.$nextTick(() => { this.initializeAllDataTables(); ... });` 这段代码。

现在，表格的初始化应该只由 `filterJournals()` 函数（在数据成功加载或加载后备数据后被调用）内部的 `$nextTick` 来处理，避免了潜在的冲突。

请您再次尝试（如果是在本地Web服务器环境下运行），看看这次是否能正确显示后备数据了。如果在 `file://` 环境下，它仍然会显示加载失败的错误信息，但理论上，如果错误信息下方显示了表格内容，则说明后备数据加载和显示逻辑是正
